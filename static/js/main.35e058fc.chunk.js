(this.webpackJsonppuv=this.webpackJsonppuv||[]).push([[0],{67:function(e,t,n){e.exports=n(95)},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),i=(n(72),n(73),n(74),n(129)),u=n(132),l=n(60),s=n(131),m=n(128),p=n(54),f=new(n.n(p).a)({accessKey:"50ed87a710c800dc9bbe33a4a18ae37cb7d51679978da874ce6037c158b74af3",secret:"2728066a53a960c2899775cc7e9731282b5cf861111d88a595d0894e3c2024cb",callbackUrl:"https://igvsiii.github.io/puv/"}),h=f.auth.getAuthenticationUrl(["public","read_user","read_photos","write_likes"]),d=function(e,t,n){return f.auth.setBearerToken(n),f.photos.listPhotos(e,t,"latest").then((function(e){return e.json()}))},E=n(19),b=function(e){return{type:"GET_USER",token:e}},k=n(21);var v=Object(E.b)((function(e){return{user:e.user.token}}),(function(e){return{setToken:function(t){return e(b(t))}}}))((function(e){var t=e.user,n=e.setToken,o=Object(k.f)(),c=window.location.search.split("code=")[1],p=Object(l.a)({palette:{primary:m.a}});return Object(a.useEffect)((function(){void 0!==c&&function(e,t){f.auth.userAuthentication(e).then((function(e){return e.json()})).then((function(e){t(e.access_token)}))}(c,n)}),[c]),Object(a.useEffect)((function(){t&&o.push("/puv/main/")}),[t]),r.a.createElement("div",null,r.a.createElement(i.a,{className:"backImg"},r.a.createElement("div",{className:"wrap"},r.a.createElement(s.a,{theme:p},r.a.createElement(u.a,{variant:"contained",color:"primary",size:"large",onClick:function(){document.location.assign(h)}},void 0===c?"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f":"...")))))})),g=n(61),O=n(134),j=n(135),w=n(133),y=n(142),_=n(141),T=n(137),z=n(57),P=n.n(z),I=n(136),N=Object(w.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var L=Object(E.b)((function(e){return{user:e.user.token}}),(function(e){return{setToken:function(t){return e(b(t))}}}))((function(e){var t=e.user,n=e.setToken,a=N(),o=r.a.useState(null),c=Object(g.a)(o,2),i=c[0],u=c[1],p=Boolean(i),f=Object(l.a)({palette:{primary:m.a}}),h=Object(k.f)(),d=null;return d=t?r.a.createElement(y.a,{onClick:function(){n(""),h.push("/puv/")}},"\u0412\u044b\u0439\u0442\u0438"):r.a.createElement(y.a,{onClick:function(){h.push("/puv/")}},"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"),r.a.createElement("div",{className:a.root},r.a.createElement(s.a,{theme:f},r.a.createElement(O.a,{position:"static",color:"primary"},r.a.createElement(j.a,null,r.a.createElement(I.a,{variant:"h6",className:a.title},"Photos app"),r.a.createElement(T.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},r.a.createElement(P.a,null)),r.a.createElement(_.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:function(){u(null)}},d)))))})),B=n(138),C=n(139),U=n(140),x=n(59),G=n.n(x),K=n(58),S=n.n(K),H=Object(w.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,paddingTop:20},gridList:{width:500},titleBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"},icon:{color:"white"}}}));var D=Object(E.b)((function(e){return{user:e.user.token,photos:e.photos.elem,size:e.photos.size}}),(function(e){return{setPhoto:function(t){return e({type:"GET_PHOTOS",newPhoto:t})},setLike:function(t){return e({type:"LIKE",photoID:t})},setUnlike:function(t){return e({type:"UNLIKE",photoID:t})}}}))((function(e){var t=e.user,n=e.photos,a=e.size,o=e.setPhoto,c=e.setLike,i=e.setUnlike,u=H(),l=a;0===a&&d(1,12,t).then((function(e){return o(e)})),window.addEventListener("scroll",(function(){document.documentElement.scrollHeight-10<document.documentElement.clientHeight+document.documentElement.scrollTop&&l===a&&0!==a&&(d(a+1,a+12,t).then((function(e){return o(e)})),l++)}));var s=function(e){t&&(!function(e,t){f.auth.setBearerToken(t),f.photos.likePhoto(e).then((function(e){return e.json()})).then((function(e){}))}(e,t),c(e))},m=function(e){t&&(!function(e,t){f.auth.setBearerToken(t),f.photos.unlikePhoto(e).then((function(e){return e.json()})).then((function(e){}))}(e,t),i(e))};return r.a.createElement("div",{className:u.root},r.a.createElement(B.a,{className:u.gridList,cols:3},n.map((function(e,t){return r.a.createElement(C.a,{key:e.id+t,cols:1},r.a.createElement("img",{src:e.urls.small,alt:e.alt_description}),r.a.createElement(U.a,{title:e.likes,titlePosition:"top",onClick:e.liked_by_user?function(t){m(e.id)}:function(t){s(e.id)},actionIcon:r.a.createElement(T.a,{"aria-label":"star ".concat(e.title),className:u.icon},e.liked_by_user?r.a.createElement(S.a,null):r.a.createElement(G.a,null)),actionPosition:"left",className:u.titleBar}))}))))}));var R=function(){return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(D,null))};var A=function(){return r.a.createElement("div",null,r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/puv/",component:v}),r.a.createElement(k.a,{path:"/puv/main/",component:R})))},J=n(25),M=n(33),W=Object(J.b)({photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{size:0,elem:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.newPhoto,r=t.photoID;switch(n){case"GET_PHOTOS":return{size:e.size+12,elem:e.elem.concat(a)};case"LIKE":return{size:e.size,elem:e.elem.map((function(e){return e.id===r?Object(M.a)(Object(M.a)({},e),{},{likes:e.likes++,liked_by_user:!0}):e}))};case"UNLIKE":return{size:e.size,elem:e.elem.map((function(e){return e.id===r?Object(M.a)(Object(M.a)({},e),{},{likes:e.likes--,liked_by_user:!1}):e}))};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.token;switch(n){case"GET_USER":return{token:a};default:return e}}}),q=Object(J.c)(W),F=n(30);c.a.render(r.a.createElement(E.a,{store:q},r.a.createElement(F.a,null,r.a.createElement(A,null))),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.35e058fc.chunk.js.map