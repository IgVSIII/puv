{"version":3,"sources":["lib/index.js","redux/actions/index.js","redux/constants/index.js","components/registration/registration.js","components/header/header.js","components/photos/photos.js","components/main/main.js","components/photos/photo/photo.js","components/app/app.js","redux/reducers/index.js","redux/reducers/photos.js","redux/reducers/user.js","redux/store/index.js","index.js"],"names":["unsplash","Unsplash","accessKey","secret","callbackUrl","authenticationUrl","auth","getAuthenticationUrl","listPhoto","start","end","token","setBearerToken","photos","listPhotos","then","res","json","setToken","type","connect","state","user","dispatch","new_token","history","useHistory","code","window","location","search","split","theme","createMuiTheme","palette","primary","lightGreen","useEffect","undefined","action","userAuthentication","access_token","setAccessTokenUnplash","push","Container","className","ThemeProvider","Button","variant","color","size","onClick","document","assign","useStyles","makeStyles","root","flexGrow","menuButton","marginRight","spacing","title","classes","React","useState","anchorEl","setAnchorEl","open","Boolean","menuItem","MenuItem","AppBar","position","Toolbar","Typography","IconButton","aria-label","aria-controls","aria-haspopup","event","currentTarget","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","display","flexWrap","justifyContent","overflow","backgroundColor","background","paper","paddingTop","gridList","width","titleBar","icon","elem","setPhoto","new_photo","newPhoto","setLike","photoID","setUnlike","stopUpdate","result","addEventListener","documentElement","scrollHeight","clientHeight","scrollTop","onLike","likePhoto","likePhotoLib","onUnlike","unlikePhoto","unlikePhotoLib","GridList","cols","map","tile","index","GridListTile","key","to","src","urls","small","alt","alt_description","GridListTileBar","likes","titlePosition","liked_by_user","ev","actionIcon","actionPosition","Main","minWidth","bullet","margin","transform","fontSize","pos","marginBottom","props","photo","match","params","photoId","Card","CardContent","gutterBottom","href","links","html","target","name","created_at","raw","clientWidth","App","exact","path","component","Registration","Photo","combineReducers","concat","item","store","createStore","reducer","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cb377d9f.chunk.js","sourcesContent":["import Unsplash from 'unsplash-js';\r\n\r\n\r\nconst unsplash = new Unsplash({\r\n    accessKey: \"50ed87a710c800dc9bbe33a4a18ae37cb7d51679978da874ce6037c158b74af3\",\r\n    secret: \"2728066a53a960c2899775cc7e9731282b5cf861111d88a595d0894e3c2024cb\",\r\n    callbackUrl: \"https://igvsiii.github.io/puv/\",\r\n    //callbackUrl: \"http://localhost:3000/puv/\"\r\n});\r\n\r\nexport const authenticationUrl = unsplash.auth.getAuthenticationUrl([\r\n    \"public\",\r\n    \"read_user\",\r\n    \"read_photos\",\r\n    \"write_likes\"\r\n  ]);\r\n\r\nexport const setAccessTokenUnplash = (code, action) => {\r\n    unsplash.auth.userAuthentication(code)\r\n        .then(res => res.json())\r\n        .then(json => {\r\n                action(json.access_token);\r\n            }\r\n        );\r\n};\r\n\r\n\r\n\r\nexport const listPhoto = (start, end, token) => {\r\n    unsplash.auth.setBearerToken(token);\r\n    return unsplash.photos.listPhotos(start, end, \"latest\")\r\n        .then(res => res.json());\r\n};\r\n\r\nexport const likePhotoLib = (id, token) => {\r\n    unsplash.auth.setBearerToken(token);\r\n    unsplash.photos.likePhoto(id)\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            //console.log(json);\r\n        });\r\n};\r\n\r\nexport const unlikePhotoLib = (id, token) => {\r\n    unsplash.auth.setBearerToken(token);\r\n    unsplash.photos.unlikePhoto(id)\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            //console.log(json);\r\n        });\r\n};","import { GETUSER, GETPHOTOS, GETUNLIKE, GETLIKE } from '../constants';\r\n\r\nexport const setToken = (token) => {\r\n    return {\r\n        type: GETUSER,\r\n        token: token\r\n    }\r\n}\r\n\r\nexport const setPhoto = (newPhoto) => {\r\n    return {\r\n        type: GETPHOTOS ,\r\n        newPhoto: newPhoto\r\n    }\r\n}\r\n\r\nexport const setLike = (photoID) => {\r\n    return {\r\n        type: GETLIKE ,\r\n        photoID: photoID\r\n    }\r\n}\r\n\r\nexport const setUnlike = (photoID) => {\r\n    return {\r\n        type: GETUNLIKE ,\r\n        photoID: photoID\r\n    }\r\n}","export const GETUSER = 'GET_USER';\r\nexport const GETPHOTOS = 'GET_PHOTOS';\r\nexport const GETLIKE = 'LIKE';\r\nexport const GETUNLIKE = 'UNLIKE';\r\nexport const UPDATESIZE = 12;\r\n\r\n","import React, {useEffect} from 'react';\r\nimport './registration.css';\r\nimport Container from '@material-ui/core/Container';\r\nimport Button from '@material-ui/core/Button';\r\nimport { createMuiTheme, ThemeProvider} from '@material-ui/core/styles';\r\nimport { lightGreen } from '@material-ui/core/colors';\r\nimport { authenticationUrl, setAccessTokenUnplash } from '../../lib';\r\nimport { connect } from 'react-redux';\r\nimport { setToken } from '../../redux/actions';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nfunction Registration({ user, setToken }) {\r\n\r\n  const history = useHistory();\r\n  let code = window.location.search.split('code=')[1];\r\n\r\n  const theme = createMuiTheme({\r\n      palette: {\r\n        primary: lightGreen,\r\n      },\r\n  });\r\n\r\n  const unsplashConnect = () => {\r\n    document.location.assign(authenticationUrl);\r\n  }\r\n\r\n  useEffect(()=> {\r\n    if (code !== undefined) {\r\n      setAccessTokenUnplash(code, setToken);\r\n      //history.push(\"/main\");\r\n    }\r\n  },[code])\r\n\r\n  useEffect(()=> {\r\n    if (user) {\r\n      //setAccessTokenUnplash(code, setToken);\r\n      history.push(\"/puv/main/\");\r\n    }\r\n  },[user])\r\n\r\n  return (\r\n    <div>\r\n      <Container className=\"backImg\">\r\n        <div className=\"wrap\">     \r\n          <ThemeProvider theme={theme}> \r\n            <Button variant=\"contained\"  color=\"primary\" size=\"large\" onClick = {unsplashConnect}>\r\n               {(code === undefined)? \"Авторизоваться\" : \"...\" }\r\n            </Button>   \r\n          </ThemeProvider>    \r\n        </div> \r\n      </Container>     \r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user.token\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setToken: (new_token) => dispatch(setToken(new_token))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Registration);\r\n\r\n","import React from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { createMuiTheme, ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport { lightGreen } from '@material-ui/core/colors';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { setToken } from '../../redux/actions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nfunction Header( {user, setToken} ) {\r\n\r\n  const classes = useStyles();\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n\r\n\r\n  const theme = createMuiTheme({\r\n    palette: {\r\n      primary: lightGreen,\r\n    },\r\n  });\r\n\r\n  const history = useHistory();\r\n\r\n  const onLogout = () => {\r\n    setToken(\"\");\r\n    history.push(\"/puv/\");\r\n  }\r\n\r\n  const onAuto = () => {\r\n    history.push(\"/puv/\");\r\n  }\r\n\r\n  let menuItem = null\r\n\r\n  if (user) {\r\n    menuItem = <MenuItem onClick = {onLogout}>Выйти</MenuItem>\r\n  } else {\r\n    menuItem = <MenuItem onClick = {onAuto}>Вы не авторизованы</MenuItem>\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ThemeProvider theme={theme}> \r\n        <AppBar position=\"static\" color=\"primary\">\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Photos app\r\n            </Typography>\r\n            <IconButton\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMenu}\r\n              color=\"inherit\"\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              keepMounted\r\n              transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n              }}\r\n              open={open}\r\n              onClose={handleClose}\r\n            >\r\n              {menuItem}\r\n            </Menu>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </ThemeProvider> \r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user.token\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setToken: (new_token) => dispatch(setToken(new_token))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GridList from '@material-ui/core/GridList';\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\r\nimport { connect } from 'react-redux';\r\nimport { listPhoto, likePhotoLib, unlikePhotoLib } from '../../lib';\r\nimport { setPhoto, setUnlike, setLike } from '../../redux/actions';\r\nimport { Link } from 'react-router-dom';\r\nimport { UPDATESIZE } from '../../redux/constants';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport StarsOutlinedIcon from '@material-ui/icons/StarsOutlined';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-around',\r\n    overflow: 'hidden',\r\n    backgroundColor: theme.palette.background.paper,\r\n    paddingTop: 20\r\n  },\r\n  gridList: {\r\n    width: 500,\r\n  },\r\n  titleBar: {\r\n    background:\r\n      'linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, ' +\r\n      'rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\r\n  },\r\n  icon: {\r\n    color: 'white',\r\n  },\r\n}));\r\n\r\n\r\nfunction Photos( {user, photos, size, setPhoto, setLike, setUnlike} ) {\r\n\r\n  const classes = useStyles();\r\n  let stopUpdate = size;\r\n\r\n  if (size === 0) {\r\n    listPhoto(1 ,UPDATESIZE ,user).then(result => setPhoto(result))\r\n  }\r\n\r\n\r\n\r\n  window.addEventListener('scroll', () => {\r\n    if ((document.documentElement.scrollHeight - 10 < \r\n       document.documentElement.clientHeight + document.documentElement.scrollTop) && (stopUpdate === size) && (size !== 0) )  \r\n    {\r\n      listPhoto(size + 1, size + UPDATESIZE ,user).then(result => setPhoto(result) )\r\n      stopUpdate++;\r\n    }  \r\n  });\r\n\r\n  const onLike = (id) => {   \r\n    \r\n    if (user) {\r\n      likePhotoLib(id, user)\r\n      setLike(id) \r\n      }\r\n  }\r\n\r\n  const onUnlike = (id) => {\r\n    \r\n    if (user) {\r\n      unlikePhotoLib(id, user)\r\n      setUnlike(id)\r\n      }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className={classes.root} >\r\n\r\n      <GridList  className={classes.gridList} cols={3} >\r\n        {photos.map((tile, index) => (\r\n          <GridListTile key={tile.id+index} cols={1}>\r\n            <Link to={\"/puv/photo/\" + index}>\r\n              <img src={tile.urls.small} alt={tile.alt_description} />\r\n            </Link>\r\n            <GridListTileBar\r\n              title={tile.likes}\r\n              titlePosition=\"top\"\r\n              onClick = { tile.liked_by_user? ev => {onUnlike (tile.id)}: ev => {onLike(tile.id)} }\r\n              actionIcon={\r\n                <IconButton aria-label={`star ${tile.title}`} className={classes.icon}  >\r\n                  {tile.liked_by_user? <StarsOutlinedIcon  /> : <StarBorderIcon  />}\r\n                </IconButton>\r\n              }\r\n              actionPosition=\"left\"\r\n              className={classes.titleBar}\r\n            />\r\n          </GridListTile>\r\n        ))}\r\n      </GridList>      \r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.user.token,\r\n  photos: state.photos.elem,\r\n  size: state.photos.size\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setPhoto: (new_photo) => dispatch(setPhoto(new_photo)),\r\n  setLike: (id) => dispatch(setLike(id)),\r\n  setUnlike: (id) => dispatch(setUnlike(id))\r\n});\r\n\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Photos);\r\n","import React from 'react';\r\nimport Header from '../header'\r\nimport Photos from '../photos'\r\n\r\n\r\nfunction Main() {\r\n  return (\r\n    <div>\r\n        <Header />\r\n        <Photos />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minWidth: 320,\r\n    },\r\n    bullet: {\r\n        display: 'inline-block',\r\n        margin: '0 2px',\r\n        transform: 'scale(0.8)',\r\n    },\r\n    title: {\r\n        fontSize: 14,\r\n    },\r\n    pos: {\r\n        marginBottom: 12,\r\n    },\r\n  });\r\n\r\nfunction Photo({ photo }) {\r\n\r\n\r\n  const classes = useStyles();\r\n  \r\n  if (photo === undefined) {\r\n    return (\r\n      <div>\r\n          <h2>Фото не найдено</h2>\r\n          <Link to=\"/puv/main/\">Назад</Link>            \r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <Card className={classes.root}>\r\n        <CardContent>\r\n          <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n            Автор: <a href={photo.user.links.html} target=\"_blank\" > {photo.user.name} </a>\r\n          </Typography>\r\n          <Typography className={classes.pos} color=\"textSecondary\">\r\n            Дата публикации:  {photo.created_at} \r\n          </Typography>\r\n          <Link to=\"/puv/main/\"> \r\n            <img src ={photo.urls.raw}  width={document.documentElement.clientWidth*0.8}/>\r\n          </Link> \r\n        </CardContent>   \r\n      </Card> \r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, props) => ({\r\n    photo: state.photos.elem[props.match.params.photoId],\r\n  });\r\n  \r\n \r\nexport default connect(mapStateToProps)(Photo);\r\n","import React from 'react';\nimport Registration from '../registration'\nimport Main from '../main'\nimport Photo from '../photos/photo'\nimport { Switch, Route } from 'react-router-dom';\n\nfunction App() {\n  return (\n    <div>\n      <Switch>\n        <Route exact path='/puv/' component={Registration} />\n        <Route path='/puv/main/' component={Main} />      \n        <Route path='/puv/photo/:photoId' component={Photo} />  \n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\r\nimport photos from './photos';\r\nimport user from './user';\r\n\r\nexport default combineReducers({\r\n  photos,\r\n  user\r\n});","import { GETPHOTOS, GETLIKE, GETUNLIKE } from '../constants';\r\n  \r\n  \r\n  \r\n  export default (state = {size: 0 , elem: []}, action) => {\r\n    const { type, newPhoto, photoID } = action;\r\n  \r\n    switch (type) {\r\n      case GETPHOTOS: \r\n        return {  size: state.size + 12,\r\n                  elem: state.elem.concat(newPhoto)};  \r\n      case GETLIKE: \r\n        return {  size: state.size,\r\n                  elem: state.elem.map((item) => (item.id === photoID? {...item, likes: ++item.likes, liked_by_user: true} : item))};  \r\n      case GETUNLIKE: \r\n        return {  size: state.size,\r\n                  elem: state.elem.map((item) => (item.id === photoID? {...item, likes: --item.likes , liked_by_user: false} : item))};   \r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  ","import { GETUSER } from '../constants';\r\n  \r\nexport default (state = {token: \"\"}, action) => {\r\n    const { type, token } = action;\r\n    switch (type) {\r\n      case GETUSER: \r\n        return {token: token}; \r\n    default:\r\n        return state;\r\n    }\r\n  };\r\n  ","import { createStore } from 'redux';\r\nimport reducer from '../reducers';\r\n\r\nconst store = createStore(reducer);\r\n\r\n//dev only\r\n//window.store = store;\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './reset.css';\nimport './index.css';\nimport App from './components/app';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}